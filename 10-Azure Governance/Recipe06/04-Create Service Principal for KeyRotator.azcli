# Retrieve the resource ID for the resource group and save it in a variable
resource_group_id=$(az group show --name Recipe10-06-rg --query id --output tsv)

# Create a service principal for the Azure Function with Contributor role in the resource group
az ad sp create-for-rbac --name AzureCookbookKeyRotator --sdk-auth --role contributor --scopes $resource_group_id


{
  "clientId": "16660bb2-3968-4c0c-89f1-3e9c693307fe",
  "clientSecret": "Khz8Q~dXpBVnlNrjz5AhJId8tONANUaGu29lmc_G",
  "subscriptionId": "02e4a7f0-e0bc-4ae8-8fa8-73f1686fb788",
  "tenantId": "0403d4d0-921d-45a7-b441-b24a0a926783",
  "activeDirectoryEndpointUrl": "https://login.microsoftonline.com",
  "resourceManagerEndpointUrl": "https://management.azure.com/",
  "activeDirectoryGraphResourceId": "https://graph.windows.net/",
  "sqlManagementEndpointUrl": "https://management.core.windows.net:8443/",
  "galleryEndpointUrl": "https://gallery.azure.com/",
  "managementEndpointUrl": "https://management.core.windows.net/"
}